/* Tailwind CSS v4+ import for Rails (tailwindcss-rails gem) */
@import "tailwindcss";

/* Optional: If you need to add theme variables, use @theme { ... } here (see Tailwind v4 docs) */

/* Add plugins using @plugin if needed */
@plugin "@tailwindcss/forms";
@plugin "@tailwindcss/aspect-ratio";
@plugin "@tailwindcss/typography";

/* v3 compatibility: border color and button cursor */
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  body {
    @apply text-slate-700 dark:text-slate-200 bg-white dark:bg-[#22272e];
  }
  p {
    @apply text-slate-700 dark:text-slate-200;
  }
  h1 {
    @apply text-4xl font-bold text-slate-900 dark:text-slate-50 mb-6;
  }
  h2 {
    @apply text-3xl font-bold text-slate-800 dark:text-slate-100 mb-5;
  }
  h3 {
    @apply text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-4;
  }
  h4 {
    @apply text-xl font-semibold text-slate-800 dark:text-slate-100 mb-3;
  }
  h5 {
    @apply text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2;
  }
  h6 {
    @apply text-base font-semibold text-slate-800 dark:text-slate-100 mb-2;
  }
  img {
    @apply w-full h-full object-cover object-center;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    -webkit-font-smoothing: antialiased;
    backface-visibility: hidden;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

/* Custom components/utilities (no variants in @apply! Use variants like group-hover: in HTML only) */
@layer components {
  .project-card {
    @apply bg-white dark:bg-slate-800 rounded-sm shadow-xs hover:shadow-sm transition-all duration-300 p-6 border border-slate-100 dark:border-slate-700;
  }
  .project-title {
    @apply text-lg font-semibold mb-3 transition-colors duration-200;
  }
  .project-description {
    @apply text-slate-600 dark:text-slate-300;
  }
  .section-title {
    @apply text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6 flex items-center;
  }
  .section-title-line {
    @apply h-px flex-grow bg-gradient-to-r from-indigo-500 to-transparent dark:from-indigo-400 ml-4;
  }
  .bio-text {
    @apply text-slate-700 dark:text-slate-300 leading-relaxed;
  }
  .article-card {
    @apply bg-white dark:bg-slate-800 rounded-sm shadow-xs p-6 border border-gray-100 dark:border-slate-700;
  }
  .article-link {
    @apply text-slate-700 dark:text-slate-300 transition-colors duration-200;
  }
  .photo-container {
    @apply relative aspect-square overflow-hidden rounded-sm shadow-xs dark:shadow-slate-900/50 bg-slate-200 dark:bg-slate-700;
  }
  .photo-image {
    @apply w-full h-full object-cover transition-transform duration-300 opacity-0;
  }
  .photo-loading {
    @apply absolute inset-0 animate-pulse;
  }
  .book-container {
    @apply aspect-[2/3] overflow-hidden rounded-sm shadow-xs hover:shadow-sm dark:shadow-slate-900/50 transition-all duration-300;
  }
  .book-image {
    @apply w-full h-full object-cover transition-transform duration-300;
  }
  .prose a {
    @apply !text-indigo-600 dark:!text-indigo-200 no-underline;
  }
}

@layer utilities {
  .btn {
    @apply text-sm cursor-pointer bg-indigo-600 px-5 py-2.5 rounded-full font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600;
  }
  .static {
    @apply !shadow-none !outline-hidden !ring-0 !rounded-none !border-none !bg-transparent;
  }
}

/* Form elements */
input[type=text],
input[type=email],
input[type=password],
input[type=tel],
input[type=search],
input[type=date],
input[type=datetime-local],
textarea,
textarea[multiple=multiple] {
  @apply block w-full p-2.5 rounded-sm text-sm text-gray-900 dark:text-white
    border-0 ring-inset ring-gray-200 ring-1 focus:ring-2 focus:ring-inset focus:ring-indigo-600 focus:border-indigo-600
    dark:ring-0 dark:focus:border-transparent dark:focus:ring-transparent
    bg-gray-50 dark:bg-slate-700 focus:bg-white dark:focus:bg-slate-600;
}
input[type=radio] {
  @apply border border-gray-300 shadow-xs;
}
select {
  @apply border border-gray-300 text-sm text-gray-900 rounded-sm shadow-xs focus:ring-indigo-500 focus:border-indigo-500;
}
label {
  @apply block uppercase tracking-wide text-xs;
}
pre {
  @apply bg-slate-400 dark:!bg-slate-900 !p-5 text-indigo-900 dark:!text-indigo-200 !text-sm;
}

/* Action Text Styles */
trix-editor {
  @apply rounded-sm m-0 p-4 min-h-[5em] outline-none;
}

trix-toolbar * {
  @apply box-border;
}

trix-toolbar {
  @apply bg-white;
}

trix-toolbar .trix-button-row {
  @apply flex flex-nowrap justify-between overflow-x-auto;
}

trix-toolbar .trix-button-group {
  @apply flex py-5 rounded-sm;
}

trix-toolbar .trix-button-group:not(:first-child) {
  @apply ml-[1.5vw];
}

@media (max-width: 768px) {
  trix-toolbar .trix-button-group:not(:first-child) {
    @apply ml-0;
  }
}

trix-toolbar .trix-button-group-spacer {
  @apply flex-grow;
}

@media (max-width: 768px) {
  trix-toolbar .trix-button-group-spacer {
    @apply hidden;
  }
}

trix-toolbar .trix-button {
  @apply relative float-left text-[rgba(0,0,0,0.6)] text-[0.75em] font-semibold whitespace-nowrap px-2 m-0 outline-none border-none rounded-none bg-transparent;
}

trix-toolbar .trix-button.trix-active {
  @apply bg-[#cbeefa] text-black;
}

trix-toolbar .trix-button:not(:disabled) {
  @apply cursor-pointer;
}

trix-toolbar .trix-button:disabled {
  @apply text-[rgba(0,0,0,0.125)];
}

@media (max-width: 768px) {
  trix-toolbar .trix-button {
    @apply tracking-[-0.01em] px-[0.3em];
  }
}

trix-toolbar .trix-button--icon {
  @apply text-inherit w-[2.6em] h-[1.6em] max-w-[calc(0.8em+4vw)] indent-[-9999px];
}

@media (max-width: 768px) {
  trix-toolbar .trix-button--icon {
    @apply h-[2em] max-w-[calc(0.8em+3.5vw)];
  }
}

trix-toolbar .trix-button--icon::before {
  @apply inline-block absolute inset-0 opacity-60 content-[''] bg-center bg-no-repeat bg-contain;
}

@media (max-width: 768px) {
  trix-toolbar .trix-button--icon::before {
    @apply right-[6%] left-[6%];
  }
}

trix-toolbar .trix-button--icon.trix-active::before {
  @apply opacity-100;
}

trix-toolbar .trix-button--icon:disabled::before {
  @apply opacity-[0.125];
}

.trix-content {
  @apply space-y-5 text-slate-700 dark:text-slate-300;
}

.trix-content > div,
.trix-content blockquote,
.trix-content ul {
  @apply leading-7;
}

.trix-content a {
  @apply underline decoration-indigo-500 decoration-2 hover:decoration-indigo-400;
}

.trix-content img {
  @apply !object-cover !object-center w-full !my-5;
  image-rendering: high-quality;
  font-size: 0;
}